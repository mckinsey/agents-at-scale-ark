---
title: Semantic Expression Reference
description: Complete reference for semantic helper expressions in event-based evaluations
---

# Semantic Expression Reference

Complete reference for all semantic helper methods available in event-based evaluations.

## Tool Helper Methods

### `tool.was_called()`
Check if any tool was called during execution.

**Returns:** `boolean`

**Example:**
```yaml
expression: "tool.was_called()"
```

### `tools.was_called(name, [scope])`
Check if a specific tool was called.

**Parameters:**
- `name` (string): Tool name to check
- `scope` (string, optional): Event scope ('current', 'session', 'query', 'all')

**Returns:** `boolean`

**Example:**
```yaml
expression: "tools.was_called('search')"
expression: "tools.was_called('database', scope='session')"
```

### `tool.get_call_count()`
Get total number of tool calls.

**Returns:** `number`

**Example:**
```yaml
expression: "tool.get_call_count() >= 2"
```

### `tool.get_success_rate()`
Calculate tool success rate (0.0 to 1.0).

**Returns:** `number`

**Example:**
```yaml
expression: "tool.get_success_rate() >= 0.8"
```

### `tools.had_error(name)`
Check if a specific tool encountered errors.

**Parameters:**
- `name` (string): Tool name to check

**Returns:** `boolean`

**Example:**
```yaml
expression: "not tools.had_error('search')"
```

### `tools.get_execution_metrics(name)`
Get detailed metrics for a specific tool.

**Parameters:**
- `name` (string): Tool name

**Returns:** `object` with fields:
- `call_count`: Number of calls
- `success_count`: Successful calls
- `error_count`: Failed calls
- `avg_duration`: Average execution time
- `total_duration`: Total execution time

**Example:**
```yaml
expression: "tools.get_execution_metrics('search').avg_duration <= 2.0"
```

## Agent Helper Methods

### `agent.was_executed()`
Check if any agent was executed.

**Returns:** `boolean`

**Example:**
```yaml
expression: "agent.was_executed()"
```

### `agents.was_executed(name, [scope])`
Check if a specific agent was executed.

**Parameters:**
- `name` (string): Agent name
- `scope` (string, optional): Event scope

**Returns:** `boolean`

**Example:**
```yaml
expression: "agents.was_executed('researcher')"
```

### `agent.get_execution_count()`
Get total number of agent executions.

**Returns:** `number`

**Example:**
```yaml
expression: "agent.get_execution_count() <= 5"
```

### `agent.get_success_rate()`
Calculate agent success rate.

**Returns:** `number`

**Example:**
```yaml
expression: "agent.get_success_rate() >= 0.9"
```

### `agents.get_tools_used(name)`
Get list of tools used by an agent.

**Parameters:**
- `name` (string): Agent name

**Returns:** `array` of tool names

**Example:**
```yaml
expression: "agents.get_tools_used('researcher').length >= 2"
```

### `agents.get_execution_summary(name)`
Get comprehensive execution summary for an agent.

**Parameters:**
- `name` (string): Agent name

**Returns:** `object` with execution details

**Example:**
```yaml
expression: "agents.get_execution_summary('researcher').status == 'completed'"
```

## Query Helper Methods

### `query.was_resolved()`
Check if query was successfully resolved.

**Returns:** `boolean`

**Example:**
```yaml
expression: "query.was_resolved()"
```

### `query.get_execution_time()`
Get total query execution time in seconds.

**Returns:** `number`

**Example:**
```yaml
expression: "query.get_execution_time() <= 30.0"
```

### `query.get_resolution_status()`
Get query resolution status.

**Returns:** `string` ('success', 'error', 'incomplete', 'unknown')

**Example:**
```yaml
expression: "query.get_resolution_status() == 'success'"
```

### `query.get_query_targets()`
Get number of resolution targets processed.

**Returns:** `number`

**Example:**
```yaml
expression: "query.get_query_targets() >= 1"
```

### `query.was_query_timeout(threshold)`
Check if query exceeded timeout threshold.

**Parameters:**
- `threshold` (number): Timeout in seconds

**Returns:** `boolean`

**Example:**
```yaml
expression: "not query.was_query_timeout(60.0)"
```

### `query.get_session_query_count([scope])`
Count queries in session.

**Parameters:**
- `scope` (string, optional): Event scope (typically 'session')

**Returns:** `number`

**Example:**
```yaml
expression: "query.get_session_query_count(scope='session') >= 1"
```

### `query.get_complexity_metrics()`
Get query complexity analysis.

**Returns:** `object` with fields:
- `complexity_level`: 'simple', 'moderate', 'complex', 'highly_complex'
- `complexity_score`: Numeric score
- `agent_executions`: Number of agent executions
- `tool_calls`: Number of tool calls
- `team_executions`: Number of team executions

**Example:**
```yaml
expression: "query.get_complexity_metrics().complexity_level != 'highly_complex'"
```

## Sequence Helper Methods

### `sequence.was_completed(events)`
Check if all events in sequence occurred (order doesn't matter).

**Parameters:**
- `events` (array): List of event reason strings

**Returns:** `boolean`

**Example:**
```yaml
expression: "sequence.was_completed(['ToolCallStart', 'ToolCallComplete'])"
```

### `sequence.check_execution_order(events, [strict])`
Verify events occurred in specific order.

**Parameters:**
- `events` (array): Ordered list of event reasons
- `strict` (boolean, optional): If true, events must be consecutive

**Returns:** `boolean`

**Example:**
```yaml
expression: "sequence.check_execution_order(['ResolveStart', 'ResolveComplete'], strict=false)"
```

### `sequence.get_time_between_events(start, end)`
Calculate time between two events.

**Parameters:**
- `start` (string): Starting event reason
- `end` (string): Ending event reason

**Returns:** `number` (seconds)

**Example:**
```yaml
expression: "sequence.get_time_between_events('ResolveStart', 'ResolveComplete') <= 60.0"
```

### `sequence.detect_parallel_execution([threshold])`
Find events that occurred in parallel.

**Parameters:**
- `threshold` (number, optional): Time window in seconds (default: 1.0)

**Returns:** `array` of parallel event groups

**Example:**
```yaml
expression: "sequence.detect_parallel_execution(1.0).length <= 3"
```

### `sequence.get_execution_flow()`
Get chronological flow of events with timing.

**Returns:** `array` of event flow items

**Example:**
```yaml
expression: "sequence.get_execution_flow().length >= 5"
```

## Team Helper Methods

### `team.was_executed()`
Check if any team was executed.

**Returns:** `boolean`

**Example:**
```yaml
expression: "team.was_executed()"
```

### `teams.was_team_executed(name)`
Check if specific team was executed.

**Parameters:**
- `name` (string): Team name

**Returns:** `boolean`

**Example:**
```yaml
expression: "teams.was_team_executed('research-team')"
```

### `teams.get_team_agents(name)`
Get list of agents in a team.

**Parameters:**
- `name` (string): Team name

**Returns:** `array` of agent names

**Example:**
```yaml
expression: "teams.get_team_agents('research-team').length >= 2"
```

### `teams.detect_collaboration_pattern(name)`
Detect team collaboration pattern.

**Parameters:**
- `name` (string): Team name

**Returns:** `string` ('sequential', 'parallel', 'mixed')

**Example:**
```yaml
expression: "teams.detect_collaboration_pattern('research-team') == 'parallel'"
```

## LLM Helper Methods

### `llm.get_call_count()`
Get total number of LLM calls.

**Returns:** `number`

**Example:**
```yaml
expression: "llm.get_call_count() <= 10"
```

### `llm.get_success_rate()`
Calculate LLM call success rate.

**Returns:** `number`

**Example:**
```yaml
expression: "llm.get_success_rate() >= 0.95"
```

### `llm.get_total_tokens()`
Get total tokens used across all LLM calls.

**Returns:** `number`

**Example:**
```yaml
expression: "llm.get_total_tokens() <= 10000"
```

## Combining Expressions

Expressions can be combined using logical operators:

### AND Operations
```yaml
expression: "tool.was_called() and agent.was_executed()"
```

### OR Operations
```yaml
expression: "query.was_resolved() or query.get_execution_time() <= 10.0"
```

### NOT Operations
```yaml
expression: "not tools.had_error('search')"
```

### Complex Conditions
```yaml
expression: "tool.get_success_rate() >= 0.8 and agent.get_success_rate() >= 0.8 and query.was_resolved()"
```

## Scope Control

Most helper methods support scope parameters:

- **'current'** - Current query only (default)
- **'session'** - Entire session
- **'query'** - Specific query ID
- **'all'** - All events in namespace

Example with scope:
```yaml
expression: "tools.was_called('search', scope='session')"
```